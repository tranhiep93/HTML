<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Angularjs Danh sach san pham</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
    <style>
        .name-clother {
            font-size: 16px;
            font-weight: bold;
        }
    </style>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
</head>
<body>
    <div class="container" ng-app="angularjs_dssp" ng-controller="angularjs_dsspCtrl">
        <h3 class="text-center">Danh sách sản phẩm</h3>
        <div class="row my-5">
            <div class="col-md-4 col-sm-12 border rounded py-3" ng-repeat="item in products">
                <div class="image-div">
                    <img src="{{item.anh}}" alt="{{item.tensp}}">
                </div>
                <div class="info my-2" style="display: flex; flex-direction: row;justify-content: space-between;">
                    <span class="name-clother" ng-bind="item.tensp"></span>
                    <span class="price-clother">{{item.gia + '$'}}</span>
                </div>
                <div class="btn-div">
                    <button class="btn btn-primary" ng-click="showProd(item)">Xem chi tiết</button>
                </div>
            </div>
        </div>
        <div class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
              <div class="modal-content py-5">
                  <h3 class="text-center">Thông tin chi tiết sản phẩm</h3>
                  <div class="row">
                    <div class="col-6">
                        <div class="image-div">
                            <img src="{{item.anh}}" alt="{{item.tensp}}">
                        </div>
                        <div class="info my-5" style="display: flex; flex-direction: row;justify-content: space-between;">
                            <span class="name-clother" ng-bind="item.tensp"></span>
                            <span class="price-clother">{{item.gia + '$'}}</span>
                        </div>
                    </div>
                    <div class="col-6">
                        {{item.mota}}
                    </div>
                </div>
              </div>
            </div>
          </div>
    </div>
    <script>
        // khai báo component app hợp lệ
        var app = angular.module("angularjs_dssp",[]);
        // định nghĩa controller
        app.controller("angularjs_dsspCtrl", angularjs_dsspCtrl);
        //định nghĩa hàm xử lý của controller
        function angularjs_dsspCtrl($scope){
            // tạo biến model chứa danh sách sản phẩm 
            //( hiển thị ngoài html và dùng trong js)
            $scope.products = initData(); 
            // định nghĩa sự kiện showProd:
            $scope.showProd = function(item){
                // chuyển đổi dữ liệu json/ object sang dạng chuỗi
                //alert (JSON.stringify(item));
                $scope.item = item;
                // hiển thị màn hình phụ
                $('.modal').modal('show');
            };

        }
        // hàm lấy/ khởi tạo danh sách dữ liệu sản phẩm
        function initData(){
            // khai báo biến mảng []
            var products = [];
            // sản phẩm có các thông tin: masp, tensp, gia, anh, mota
            // khai báo biến đối tượng/ object {}
            var prod = {
                masp:"sp001", 
                tensp: "Váy dạ hội 1", 
                gia: 200, 
                anh:"images/clothes/Dress-1.jpg",
                mota:"Váy dạ hội 1 được thiết kế sang trọng, đẹp mắt phù hợp cho nhiều sự kiện"
            };
            console.log("Gia san pham: "+ prod.gia);
            console.log("Ma san pham: "+ prod.masp);
            // lưu đối tượng vào trong ds ( mảng )
            products.push(prod);
            // thêm các sản phảm
            products.push({
                masp:"sp002", 
                tensp: "Váy dạ hội 2", 
                gia: 100, 
                anh:"images/clothes/Dress-2.jpg",
                mota:"Váy dạ hội 2 đẹp"
            });
            products.push({
                masp:"sp003", 
                tensp: "Váy dạ hội 3", 
                gia: 300, 
                anh:"images/clothes/Dress-3.jpg",
                mota:"Váy dạ hội 3 sam trọng, thiết kế cầu kỳ"
            });
            products.push({
                masp:"sp004", 
                tensp: "Váy dạ hội 4", 
                gia: 50, 
                anh:"images/clothes/Dress-4.jpg",
                mota:"Váy dạ hội 4 đơn giản, dễ sử dụng"
            });
            products.push({
                masp:"sp005", 
                tensp: "Váy dạ hội 5", 
                gia: 150, 
                anh:"images/clothes/Dress-5.jpg",
                mota:"Váy dạ hội 5 đẹp, thiết kế cầu kỳ"
            });
            products.push({
                masp:"sp006", 
                tensp: "Váy dạ hội 6", 
                gia: 300, 
                anh:"images/clothes/Dress-6.jpg",
                mota:"Váy dạ hội 6 rực rỡ, thiết kế cầu kỳ"
            });
            console.log("So luong sp trong ds: "+ products.length);
            return products;
        }
    </script>
</body>
</html>